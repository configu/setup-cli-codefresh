version: "1.0"
steps:
  main_clone:
    title: "Cloning repository"
    type: git-clone
    repo: "${{CF_REPO_OWNER}}/${{CF_REPO_NAME}}"
    revision: "${{CF_REVISION}}"
    git: github

  run_configu_cli:
    title: Running Configu CLI inside Docker
    image: configu/cli
    commands:
      - configu --version
      - |
        configu eval \
          --store 'configu' \
          --set 'test/codefresh' \
          --schema '/codefresh/volume/${{CF_REPO_NAME}}/.cfgu.json' \
        | configu export --explain
